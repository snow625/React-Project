"use strict";(self.webpackChunkreact_project=self.webpackChunkreact_project||[]).push([[819],{5738:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(885),a={backbox:"RightSideBar_backbox__f1uHh",box:"RightSideBar_box__5rTAJ",title:"RightSideBar_title__b9qBg",flexbox:"RightSideBar_flexbox__Ultvk",list:"RightSideBar_list__RNeJX",item:"RightSideBar_item__0V+B1",sub_title:"RightSideBar_sub_title__A7b6T",text:"RightSideBar_text__J6xPs"},i=n(1405),s=n(2616),c=n(3329),l=function(){var e=(0,i.v9)(s.Sp),t=(0,i.v9)(s.gN),n=(0,i.v9)(s.kZ),l=function(){if(e.kcalLeft){var t={};return Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),a=n[0],i=n[1];t[a]=Math.floor(i)})),{kcalLeft:t.kcalLeft,kcalConsumed:t.kcalConsumed,dailyRate:t.dailyRate,percentsOfDailyRate:t.percentsOfDailyRate}}return{kcalLeft:"000",kcalConsumed:"000",dailyRate:"000",percentsOfDailyRate:"000"}}(),o=l.kcalLeft,u=l.kcalConsumed,d=l.dailyRate,m=l.percentsOfDailyRate;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:a.backbox,children:(0,c.jsxs)("div",{className:a.box,children:[(0,c.jsxs)("div",{className:a.summary,children:[(0,c.jsx)("h3",{className:a.title,children:"Summary for ".concat(function(){if(t){var e=t.split("");e.splice(4,1,"/");var n=e;return n.splice(7,1,"/"),n.join("")}}())}),(0,c.jsxs)("div",{className:a.flexbox,children:[(0,c.jsxs)("ul",{className:a.list,children:[(0,c.jsx)("li",{className:a.item,children:"Left"}),(0,c.jsx)("li",{className:a.item,children:"Consumed"}),(0,c.jsx)("li",{className:a.item,children:"Daily rate"}),(0,c.jsx)("li",{className:a.item,children:"Daily percentage"})]}),(0,c.jsxs)("ul",{className:a.list,children:[(0,c.jsxs)("li",{className:a.item,children:[(0,c.jsx)("span",{className:"{style.number}",children:o})," kcal"]}),(0,c.jsxs)("li",{className:a.item,children:[(0,c.jsx)("span",{className:"{style.number}",children:u})," kcal"]}),(0,c.jsxs)("li",{className:a.item,children:[(0,c.jsx)("span",{className:"{style.number}",children:d})," kcal"]}),(0,c.jsxs)("li",{className:a.item,children:[(0,c.jsx)("span",{className:"{style.number}",children:m})," ","%"]})]})]})]}),(0,c.jsxs)("div",{className:a.food,children:[(0,c.jsx)("h3",{className:a.sub_title,children:"Food not recommended"}),n?function(){var e=n.map((function(e){return(0,c.jsx)("li",{children:e},e)}));return(0,c.jsx)("ol",{children:e})}():(0,c.jsx)("p",{className:a.text,children:"Your diet will be displayed here"})]})]})})})}},571:function(e,t,n){n.r(t),n.d(t,{default:function(){return le}});var r=n(885),a=n(2791),i=n(1405),s=n(6871),c=n(9513),l=n.n(c),o=(n(8639),n(8938)),u="diaryDate\u0421alendar_wrapper__1gq55",d="diaryDate\u0421alendar_datePicker__FksKS",m="diaryDate\u0421alendar_icon__cZyaP",_=n(3329),h=function(e){var t=e.fetchDayInfo,n=(0,a.useState)(new Date),i=(0,r.Z)(n,2),s=i[0],c=i[1];return(0,a.useEffect)((function(){t({date:s.toISOString().slice(0,10)})}),[t,s]),(0,_.jsx)("div",{className:"wrapper_container",children:(0,_.jsxs)("div",{className:u,children:[(0,_.jsx)(l(),{className:d,selected:s,onChange:function(e){return c(e)},dateFormat:"dd.MM.yyyy"}),(0,_.jsx)("svg",{className:m,children:(0,_.jsx)("use",{href:o.Z+"#icon-calendar"})})]})})},f=n(4165),x=n(5861),p=n(1413),v="circleButton_btn__2aj1H",j="circleButton_mobile__5dTLh",b="circleButton_icon__AB0yh",y=function(e){var t=e.type,n=e.label,r=e.mobile,a=e.iconNameInSprite,i=e.onClick;return(0,_.jsx)("button",{className:r?"".concat(v," ").concat(j):v,type:t,"aria-label":n,onClick:i,children:(0,_.jsx)("svg",{className:b,children:(0,_.jsx)("use",{href:o.Z+"#icon-".concat(a)})})})};y.defaultProps={type:"button",label:"Button",mobile:!1,onClick:function(){}};var g=y,N="productSelector_select__gPhvF",k=function(e){var t=e.list,n=e.onChange,r=(t.length>10?t.slice(0,10):t).map((function(e){var t=e._id,n=e.title.ru;return(0,_.jsx)("option",{id:t,value:n,children:n},t)}));return(0,_.jsx)("select",{className:N,onChange:function(e){var t=e.target.value;n(t)},children:r})};k.defaultProps={list:[],onChange:function(){}};var P=k,Z={product:{name:"product",required:!0,type:"text"},weight:{name:"weight",required:!0,type:"number",min:"1",max:"3000",title:"Input weight product in (gram)"}},w=n(158),C=n(7864),S=function(){var e=(0,x.Z)((0,f.Z)().mark((function e(t){var n,r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.eE.get("/product?search=".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R="diaryAddProductForm_addForm__6LUsR",L="diaryAddProductForm_wrapperProduct__hr9La",I="diaryAddProductForm_wrapperGrams__4Ji+U",F="diaryAddProductForm_label__g2eLt",B="diaryAddProductForm_labelGrams__sdZQs",D="diaryAddProductForm_input__3k+X3",A={product:"",foundProducts:[],currentProduct:"",id:null,weight:""},T=function(e){var t=e.onSubmit,n=(0,w.Z)({onSubmit:t,initialState:A}),r=n.state,i=n.setState,s=n.handleChange,c=n.handleSubmit,l=r.product,o=r.foundProducts,u=r.currentProduct,d=r.weight;(0,a.useEffect)((function(){var e=function(){var e=(0,x.Z)((0,f.Z)().mark((function e(t){var n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(t);case 3:n=e.sent,i((function(e){return(0,p.Z)((0,p.Z)({},e),{},{foundProducts:n})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();u||l.length>2&&e(l)}),[l,u,i]);return(0,_.jsx)("div",{className:"wrapper_container",children:(0,_.jsxs)("form",{className:R,onSubmit:c,children:[(0,_.jsxs)("div",{className:L,children:[(0,_.jsx)("label",{htmlFor:"product",className:F,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"}),(0,_.jsx)("input",(0,p.Z)({name:"product",id:"product",className:D,value:l,onChange:s,onFocus:function(){i((function(e){return(0,p.Z)((0,p.Z)({},e),{},{foundProducts:[],currentProduct:"",id:null})}))},autoComplete:"off"},Z.product)),o.length>0&&(0,_.jsx)(P,{list:o,onChange:function(e){var t=o.find((function(t){return t.title.ru===e}))._id;i((function(n){return(0,p.Z)((0,p.Z)({},n),{},{product:e,currentProduct:e,foundProducts:[],id:t})}))}})]}),(0,_.jsxs)("div",{className:I,children:[(0,_.jsx)("label",{htmlFor:"weight",className:B,children:"Grams"}),(0,_.jsx)("input",(0,p.Z)((0,p.Z)({id:"weight",className:D},Z.weight),{},{value:d,onChange:s}))]}),(0,_.jsx)(g,{type:"submit",label:"Add product button",iconNameInSprite:"add"})]})})},q="diaryProductsListItem_listItem__sfxH7",Y="diaryProductsListItem_calories__GzQnx",E="diaryProductsListItem_grams__UeXqj",G="diaryProductsListItem_product__KiujG",O="diaryProductsListItem_btn__2B-43",H="diaryProductsListItem_icon__kttsa",J=function(e){var t=e.title,n=e.weight,r=e.kcal,a=e.id,i=e.onClick;return(0,_.jsxs)("li",{className:q,children:[(0,_.jsx)("span",{className:G,children:t}),(0,_.jsx)("span",{className:E,children:n}),(0,_.jsxs)("span",{className:Y,children:[Math.round(r)," kcal"]}),(0,_.jsx)("button",{className:O,onClick:function(){return i(a)},"aria-label":"button delete element",children:(0,_.jsx)("svg",{className:H,children:(0,_.jsx)("use",{href:o.Z+"#icon-remove"})})})]},a)},U="diaryProductsList_list__HbP9-",X="diaryProductsList_warn__wziG9",M=function(e){var t=e.eatenProducts,n=e.onClick;return(0,_.jsx)("div",{className:"wrapper_container",children:function(){if(t.length>0){var e=t.map((function(e){var t=e.title,r=e.weight,a=e.kcal,i=e.id;return(0,_.jsx)(J,{onClick:n,title:t,weight:r,kcal:a,id:i},i)}));return(0,_.jsx)("ul",{className:U,children:e.reverse()})}return(0,_.jsx)("p",{className:X,children:"List empty, add new product"})}()})};M.defaultProps={eatenProducts:[]};var Q=M,z=n(2358),K=n(7277),W=n(3441),V=n(7008),$=n(2616),ee=n(1537),te="diary_wrapper__XjRIh",ne="diary_btn__-pfQA",re=function(){var e=(0,a.useState)(!1),t=(0,r.Z)(e,2),n=t[0],c=t[1],l=function(){c((function(e){return!e}))},o=(0,i.I0)(),u=(0,s.s0)(),d=(0,i.v9)($.H2),m=d.loading,f=d.error,x=d.eatenProducts,p=d.dayId,v=d.date,j=(0,a.useCallback)((function(e){o((0,ee.GS)(e)),o((0,V.d0)(e))}),[o]),b=(0,a.useCallback)((function(e){var t=e.id,n=e.weight,r={productId:t,weight:Number(n),date:v};o((0,V.gK)(r))}),[v,o]),y=(0,a.useCallback)((function(e){var t={dayId:p,eatenProductId:e};o((0,V.kh)(t)),o((0,ee.cq)(e))}),[p,o]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:te,children:[(0,_.jsx)(h,{fetchDayInfo:j}),(0,_.jsx)(T,{onSubmit:b}),(0,_.jsx)(Q,{eatenProducts:x,onClick:y}),(0,_.jsx)("div",{className:ne,children:(0,_.jsx)(g,{type:"button",label:"Add product button",mobile:!0,iconNameInSprite:"add",onClick:l})})]}),f&&function(e){401===(null===e||void 0===e?void 0:e.status)&&u("/login")}(f),m&&(0,_.jsx)(z.Z,{}),n&&(0,_.jsx)(K.Z,{onClose:l,children:(0,_.jsx)(W.Z,{})})]})},ae=n(5738),ie=n(7068),se="diaryPage_wrapper__3dexS",ce="diaryPage_diary__DOxYG",le=function(){var e=(0,i.v9)($.YR).error;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:se,children:[(0,_.jsx)("div",{className:ce,children:(0,_.jsx)(re,{})}),(0,_.jsx)(ae.Z,{})]}),e&&(0,ie.P)(e)]})}},2616:function(e,t,n){n.d(t,{H2:function(){return r},Sp:function(){return a},YR:function(){return s},gN:function(){return i},kZ:function(){return c}});var r=function(e){return e.summary},a=function(e){return e.summary.summary},i=function(e){return e.summary.date},s=function(e){return{loading:e.summary.loading,error:e.summary.error}},c=function(e){return e.summary.notAllowedProducts}},4498:function(e,t,n){n.d(t,{Z:function(){return c}});var r="button_btn__GLfzt",a="button_btn_white__vYoLr",i=n(3329),s=function(e){var t=e.type,n=e.text,s=e.onClick,c=e.white;return(0,i.jsx)("button",{className:c?a:r,onClick:s,type:t,children:n})};s.defaultProps={white:!1,type:"submit",onClick:function(){}};var c=s},3441:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(4498),a="modalText_title__+vC79",i="modalText_amount__JAcX+",s="modalText_text__eUWXn",c="modalText_sub_title__W-6QY",l="modalText_list__YYx7n",o="modalText_item__q9Uth",u=n(3329),d=function(e){var t=e.list;return function(){if(t.length>0){var e=t.map((function(e){return(0,u.jsx)("li",{className:o,children:e},e)}));return(0,u.jsx)("ol",{className:l,children:e})}return(0,u.jsx)("p",{className:o,children:"You are allowed to eat everything"})}()},m=function(e){var t=e.calories,n=e.list,l=e.onClick;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h2",{className:a,children:" Your recommended daily calorie intake is"}),(0,u.jsxs)("p",{className:s,children:[t," ",(0,u.jsx)("span",{className:i,children:"\u043a\u043a\u0430\u043b"})]}),(0,u.jsx)("h3",{className:c,children:"Foods you should not eat"}),(0,u.jsx)(d,{list:n}),(0,u.jsx)(r.Z,{type:"button",onClick:l,text:"Start losing weight"})]})};m.defaultProps={list:[],onClick:function(){}};var _=m},7277:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(2791),a=n(4164),i="modal_overlay__R++hW",s="modal_modal__2Pbuy",c="modal_close_btn__DTBAR",l="modal_container__Jd1Z7",o="modal_close_icon__mvDI0",u=n(8938),d=n(3329),m=document.getElementById("modal-root"),_=function(e){var t=e.children,n=e.onClose;function _(e){var t=e.target,r=e.currentTarget,a=e.code;t!==r&&"Escape"!==a||n()}return(0,r.useEffect)((function(){return document.addEventListener("keydown",_),function(){return document.removeEventListener("keydown",_)}}),[]),(0,a.createPortal)((0,d.jsx)("div",{onClick:_,className:i,children:(0,d.jsxs)("div",{className:s,children:[(0,d.jsx)("button",{className:c,type:"button","aria-label":"button close",onClick:n,children:(0,d.jsx)("svg",{className:o,children:(0,d.jsx)("use",{href:u.Z+"#icon-close"})})}),(0,d.jsx)("div",{className:l,children:t})]})}),m)}},158:function(e,t,n){var r=n(4942),a=n(1413),i=n(885),s=n(2791),c=n(2007),l=n.n(c),o=function(e){var t=e.onSubmit,n=e.initialState,c=e.isReset,l=(0,s.useState)((0,a.Z)({},n)),o=(0,i.Z)(l,2),u=o[0],d=o[1];return{state:u,setState:d,handleChange:function(e){var t=e.target,n=t.name,i=t.value,s=t.type,c=t.checked,l="checkbox"===s?c:i;d((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,r.Z)({},n,l))}))},handleSubmit:function(e){e.preventDefault(),t((0,a.Z)({},u)),c&&d((0,a.Z)({},n))}}};o.defaultProps={onSubmit:function(){},initialState:{},isReset:!0},o.propTypes={onSubmit:l().func.isRequired,initialState:l().shape.isRequired,isReset:l().bool.isRequired},t.Z=o}}]);
//# sourceMappingURL=819.a2c1c3e4.chunk.js.map